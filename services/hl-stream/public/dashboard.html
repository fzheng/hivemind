<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <title>HyperMind</title>
    <link rel="stylesheet" href="/dashboard/static/dashboard.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <div class="header-left">
        <span class="brand-name">HyperMind</span>
        <span class="brand-separator"></span>
        <span class="live-clock" id="live-clock">--:--:--</span>
      </div>
      <div class="header-center">
        <div class="price-ticker">
          <div class="price-item" id="btc-price-item">
            <span class="price-symbol">BTC</span>
            <span class="price-value" id="btc-price">â€”</span>
          </div>
          <div class="price-divider"></div>
          <div class="price-item" id="eth-price-item">
            <span class="price-symbol">ETH</span>
            <span class="price-value" id="eth-price">â€”</span>
          </div>
        </div>
      </div>
      <div class="header-right">
        <div class="theme-toggle">
          <button data-theme="dark" title="Dark theme">
            <svg viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          </button>
          <button data-theme="light" title="Light theme">
            <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
          </button>
          <button data-theme="auto" class="active" title="Auto (system)">
            <svg viewBox="0 0 24 24"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8m-4-4v4"/></svg>
          </button>
        </div>
      </div>
    </header>
    <main>
      <!-- Row 1: Chart (full width, collapsible) -->
      <section class="chart-section">
        <div class="card chart-card">
          <div class="chart-header">
            <div class="toggle-group">
              <button class="active" data-symbol="BTCUSDT">BTC</button>
              <button data-symbol="ETHUSDT">ETH</button>
            </div>
            <button class="chart-collapse-btn" id="chart-collapse-btn" title="Collapse chart">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 15l-6-6-6 6"/>
              </svg>
            </button>
          </div>
          <div id="tradingview_chart" class="chart-container"></div>
        </div>
      </section>

      <!-- Row 2: AI Trade Signals (full width) -->
      <section class="ai-section">
        <div class="card ai-recommendations-card">
          <div class="card-header">
            <h3>
              <span class="ai-icon">âš¡</span>
              AI Signals
              <span class="panel-subtitle">Generated from tracked trader patterns</span>
            </h3>
            <div class="card-actions">
              <span class="ai-status" id="ai-status">
                <span class="ai-status-dot"></span>
                Analyzing...
              </span>
              <span class="ai-disclaimer-inline">
                <svg viewBox="0 0 24 24" width="12" height="12" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                Not financial advice
              </span>
            </div>
          </div>
          <div class="ai-signals-container">
            <table class="ai-signals-table">
              <thead>
                <tr>
                  <th>Time</th>
                  <th>Symbol</th>
                  <th>Action</th>
                  <th>Entry Price</th>
                  <th>Stop Loss</th>
                  <th>Take Profit</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="ai-recommendations-table"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Row 3: Tracked Traders + Trader Activity (side by side) -->
      <section class="grid-bottom">
        <div class="card leaderboard-card">
          <div class="card-header">
            <h3>
              Tracked Traders
              <span class="panel-subtitle">Top performers (30-day) + custom accounts</span>
            </h3>
            <div class="card-actions">
              <span id="last-refresh" class="last-refresh">Updated: â€”</span>
              <button id="refresh-btn" class="refresh-btn" title="Refresh leaderboard">
                <svg class="refresh-icon" viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
                </svg>
              </button>
            </div>
          </div>
          <span class="metric-hint">AI analyzes these traders to generate signals. <span class="custom-badge">â˜…</span> = custom</span>

          <!-- Custom Accounts Section -->
          <div class="custom-accounts-section">
            <div class="custom-accounts-header">
              <span>Custom Accounts (<span id="custom-count">0</span>/3)</span>
            </div>
            <div class="custom-accounts-form">
              <input type="text" id="custom-address-input" placeholder="0x..." maxlength="42" />
              <input type="text" id="custom-nickname-input" placeholder="Nickname" maxlength="32" />
              <button id="add-custom-btn" class="add-custom-btn" title="Add">+</button>
            </div>
            <div id="custom-accounts-error" class="custom-accounts-error"></div>
          </div>

          <div class="leaderboard-table-container">
            <table class="stats-table leaderboard-table">
              <thead>
                <tr>
                  <th>Address</th>
                  <th>Win%</th>
                  <th>Trades</th>
                  <th>Holdings</th>
                  <th>PnL</th>
                  <th>30D Curve</th>
                </tr>
              </thead>
              <tbody id="address-table"></tbody>
            </table>
          </div>
        </div>
        <div class="card fills-card">
          <div class="card-header">
            <h3>
              <span class="live-dot" title="Live"></span>
              Trader Activity
              <span class="panel-subtitle">Real-time fills from tracked accounts</span>
            </h3>
            <div class="fills-meta">
              <span id="fills-count" class="fills-count">0 fills</span>
              <span id="fills-time-range" class="time-range">â€”</span>
            </div>
          </div>
          <div class="fills-scroll-container" id="fills-scroll-container">
            <table class="stats-table fills-table">
              <thead>
                <tr>
                  <th>Time</th>
                  <th>Address</th>
                  <th>Action</th>
                  <th>Size</th>
                  <th>Prev</th>
                  <th>Price</th>
                  <th>PnL</th>
                </tr>
              </thead>
              <tbody id="fills-table"></tbody>
            </table>
            <div id="fills-load-more" class="load-more-indicator" style="display: none;">
              <span class="load-more-spinner"></span>
              <span>Loading...</span>
            </div>
          </div>
          <div class="fills-status-bar" id="fills-status-bar">
            <span class="fills-status-text" id="fills-status-text">
              <span class="status-icon">ðŸ“Š</span>
              <span id="fills-status-message">Waiting for fills...</span>
            </span>
            <button id="load-history-btn" class="load-history-btn">Load More</button>
          </div>
        </div>
      </section>
    </main>
    <script src="https://s3.tradingview.com/tv.js"></script>
    <script type="module" src="/dashboard/static/dashboard.js"></script>
  </body>
</html>
